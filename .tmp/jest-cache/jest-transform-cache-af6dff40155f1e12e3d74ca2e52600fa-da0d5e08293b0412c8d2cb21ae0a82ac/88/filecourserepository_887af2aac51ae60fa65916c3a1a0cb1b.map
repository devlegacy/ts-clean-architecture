{"file":"C:\\Users\\Devlegacy\\repositories\\devlegacy\\ts-clean-architecture\\src\\contexts\\mooc\\courses\\infrastructure\\persistance\\file-course.repository.ts","mappings":";;;;AAAA,+BAA6C;AAC7C,oDAAmB;AAEnB,gDAA4C;AAG5C,MAAa,oBAAoB;IACvB,SAAS,GAAG,GAAG,SAAS,UAAU,CAAA;IAE1C,KAAK,CAAC,IAAI,CAAC,MAAc;QACvB,YAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,IAAA,gBAAS,EAAC,MAAM,CAAC,CAAC,CAAA;IACpE,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,QAAgB;QAC3B,MAAM,UAAU,GAAG,MAAM,YAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAA;QACtE,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,IAAA,kBAAW,EAAC,UAAU,CAAC,CAAA;QAEtD,OAAO,IAAI,eAAM,CAAC,EAAE,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAA;IACvC,CAAC;IAEO,QAAQ,CAAC,EAAU;QACzB,OAAO,GAAG,IAAI,CAAC,SAAS,IAAI,EAAE,OAAO,CAAA;IACvC,CAAC;CACF;AAjBD,oDAiBC","names":[],"sources":["C:\\Users\\Devlegacy\\repositories\\devlegacy\\ts-clean-architecture\\src\\contexts\\mooc\\courses\\infrastructure\\persistance\\file-course.repository.ts"],"sourcesContent":["import { deserialize, serialize } from 'bson'\nimport fs from 'fs'\n\nimport { Course } from '../../domain/course'\nimport { CourseRepository } from '../../domain/course.repository'\n\nexport class FileCourseRepository implements CourseRepository {\n  private FILE_PATH = `${__dirname}/courses`\n\n  async save(course: Course) {\n    fs.promises.writeFile(this.filePath(course.id), serialize(course))\n  }\n\n  async search(courseId: string): Promise<Course> {\n    const courseData = await fs.promises.readFile(this.filePath(courseId))\n    const { id, name, duration } = deserialize(courseData)\n\n    return new Course(id, name, duration)\n  }\n\n  private filePath(id: string) {\n    return `${this.FILE_PATH}.${id}.repo`\n  }\n}\n"],"version":3}