f8b8e8720ce2398ec0ddb821ec372a47
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FileCourseRepository = void 0;
const tslib_1 = require("tslib");
const bson_1 = require("bson");
const fs_1 = tslib_1.__importDefault(require("fs"));
const course_1 = require("../../domain/course");
class FileCourseRepository {
    FILE_PATH = `${__dirname}/courses`;
    async save(course) {
        fs_1.default.promises.writeFile(this.filePath(course.id), (0, bson_1.serialize)(course));
    }
    async search(courseId) {
        const courseData = await fs_1.default.promises.readFile(this.filePath(courseId));
        const { id, name, duration } = (0, bson_1.deserialize)(courseData);
        return new course_1.Course(id, name, duration);
    }
    filePath(id) {
        return `${this.FILE_PATH}.${id}.repo`;
    }
}
exports.FileCourseRepository = FileCourseRepository;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxEZXZsZWdhY3lcXHJlcG9zaXRvcmllc1xcZGV2bGVnYWN5XFx0cy1jbGVhbi1hcmNoaXRlY3R1cmVcXHNyY1xcY29udGV4dHNcXG1vb2NcXGNvdXJzZXNcXGluZnJhc3RydWN0dXJlXFxwZXJzaXN0YW5jZVxcZmlsZS1jb3Vyc2UucmVwb3NpdG9yeS50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsK0JBQTZDO0FBQzdDLG9EQUFtQjtBQUVuQixnREFBNEM7QUFHNUMsTUFBYSxvQkFBb0I7SUFDdkIsU0FBUyxHQUFHLEdBQUcsU0FBUyxVQUFVLENBQUE7SUFFMUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFjO1FBQ3ZCLFlBQUUsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUEsZ0JBQVMsRUFBQyxNQUFNLENBQUMsQ0FBQyxDQUFBO0lBQ3BFLENBQUM7SUFFRCxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQWdCO1FBQzNCLE1BQU0sVUFBVSxHQUFHLE1BQU0sWUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFBO1FBQ3RFLE1BQU0sRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxHQUFHLElBQUEsa0JBQVcsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUV0RCxPQUFPLElBQUksZUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUE7SUFDdkMsQ0FBQztJQUVPLFFBQVEsQ0FBQyxFQUFVO1FBQ3pCLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxJQUFJLEVBQUUsT0FBTyxDQUFBO0lBQ3ZDLENBQUM7Q0FDRjtBQWpCRCxvREFpQkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxEZXZsZWdhY3lcXHJlcG9zaXRvcmllc1xcZGV2bGVnYWN5XFx0cy1jbGVhbi1hcmNoaXRlY3R1cmVcXHNyY1xcY29udGV4dHNcXG1vb2NcXGNvdXJzZXNcXGluZnJhc3RydWN0dXJlXFxwZXJzaXN0YW5jZVxcZmlsZS1jb3Vyc2UucmVwb3NpdG9yeS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZXNlcmlhbGl6ZSwgc2VyaWFsaXplIH0gZnJvbSAnYnNvbidcbmltcG9ydCBmcyBmcm9tICdmcydcblxuaW1wb3J0IHsgQ291cnNlIH0gZnJvbSAnLi4vLi4vZG9tYWluL2NvdXJzZSdcbmltcG9ydCB7IENvdXJzZVJlcG9zaXRvcnkgfSBmcm9tICcuLi8uLi9kb21haW4vY291cnNlLnJlcG9zaXRvcnknXG5cbmV4cG9ydCBjbGFzcyBGaWxlQ291cnNlUmVwb3NpdG9yeSBpbXBsZW1lbnRzIENvdXJzZVJlcG9zaXRvcnkge1xuICBwcml2YXRlIEZJTEVfUEFUSCA9IGAke19fZGlybmFtZX0vY291cnNlc2BcblxuICBhc3luYyBzYXZlKGNvdXJzZTogQ291cnNlKSB7XG4gICAgZnMucHJvbWlzZXMud3JpdGVGaWxlKHRoaXMuZmlsZVBhdGgoY291cnNlLmlkKSwgc2VyaWFsaXplKGNvdXJzZSkpXG4gIH1cblxuICBhc3luYyBzZWFyY2goY291cnNlSWQ6IHN0cmluZyk6IFByb21pc2U8Q291cnNlPiB7XG4gICAgY29uc3QgY291cnNlRGF0YSA9IGF3YWl0IGZzLnByb21pc2VzLnJlYWRGaWxlKHRoaXMuZmlsZVBhdGgoY291cnNlSWQpKVxuICAgIGNvbnN0IHsgaWQsIG5hbWUsIGR1cmF0aW9uIH0gPSBkZXNlcmlhbGl6ZShjb3Vyc2VEYXRhKVxuXG4gICAgcmV0dXJuIG5ldyBDb3Vyc2UoaWQsIG5hbWUsIGR1cmF0aW9uKVxuICB9XG5cbiAgcHJpdmF0ZSBmaWxlUGF0aChpZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGAke3RoaXMuRklMRV9QQVRIfS4ke2lkfS5yZXBvYFxuICB9XG59XG4iXSwidmVyc2lvbiI6M30=